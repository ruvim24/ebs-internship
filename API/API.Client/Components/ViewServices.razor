@page "/test"
@using Domain.Enums
@using Shared.Dtos.Services
@inject ISnackbar Snackbar


<MudDataGrid Items="@serviceList">
    
    <ToolBarContent>
        <MudText Typo="Typo.h6">Our Services</MudText>
        <MudSpacer/>
        <MudTextField T="string" ValueChanged="@(s => OnSearch(s))" Placeholder="Search" Adornment="Adornment.Start"
                      AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
    </ToolBarContent>

    <Columns>
        <PropertyColumn Property="x => x.Name" Title="Name"/>
        <PropertyColumn Property="x => x.Description" Title="Description"/>
        <PropertyColumn Property="x => x.Duration" Title="Duration"/>
        <PropertyColumn Property="x => x.Price" Title="Price"/>
        <PropertyColumn Property="x => x.ServiceType" Title="Type"/>
            @*<EditTemplate>
                <MudSelect @bind-Value="context.Item.Position" Required RequiredError="You must select a Type!!!" Margin="@Margin.Dense">
                    <MudSelectItem Value="ServiceType.Consultation">Consultation</MudSelectItem>
                    <MudSelectItem Value="ServiceType.Maintenance">Maintenance</MudSelectItem>
                    <MudSelectItem Value="ServiceType.Reparation">Reparation</MudSelectItem>
            </MudSelect>
        </EditTemplate>*@
        
        <TemplateColumn StickyRight="true">
            <CellTemplate>
                <MudIconButton Icon="@Icons.Material.Filled.Edit" Size="@Size.Small" OnClick="@context.Actions.StartEditingItemAsync" />
                <MudIconButton Icon="@Icons.Material.Filled.Delete" Size="@Size.Small" />
            </CellTemplate>
        </TemplateColumn>
    </Columns>
</MudDataGrid>




@code {
    private List<ServiceDto> serviceList = new List<ServiceDto>
    {
        new ServiceDto { Id = 1, Name = "Haircut", Description = "Standard haircut", ServiceType = ServiceType.Consultation, Price = 15.99m, Duration = 30 },
        new ServiceDto { Id = 2, Name = "Shave", Description = "Professional shave", ServiceType = ServiceType.Reparation, Price = 10.99m, Duration = 20 },
    };
    
    MudDataGrid<ServiceDto> dataGrid;
    string searchString = null;

    private Task OnSearch(string text)
    {
        searchString = text;
        return dataGrid.ReloadServerData();
    }
}
